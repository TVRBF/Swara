<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Student Dashboard</title>
    <!-- Fixed CSS paths for GitHub Pages -->
    <link href="/Swara/css/output.css" rel="stylesheet">
    <link href="/Swara/css/custom.css" rel="stylesheet">
</head>
<body class="bg-gray-100 min-h-screen flex flex-col">

    <!-- Main content -->
    <main class="flex-1 p-6">
        <section class="bg-white p-6 rounded shadow mb-6">
            <h2 class="text-xl font-semibold mb-4">Onboarding Progress</h2>
            <div class="w-full bg-gray-300 rounded-full h-6 mb-2">
                <div id="progressBar" class="bg-blue-500 h-6 rounded-full" style="width:0%"></div>
            </div>
            <p class="text-gray-700 mt-2"><span id="progressPercent">0%</span> completed</p>
        </section>

        <section class="bg-white p-6 rounded shadow">
            <h2 class="text-xl font-semibold mb-4">Tasks Checklist</h2>
            <ul id="tasksList" class="space-y-2"></ul>
        </section>
    </main>

    <!-- Footer with buttons -->
    <footer class="bg-gray-100 shadow-inner p-4 flex justify-around items-center fixed bottom-0 left-0 w-full z-50">
        <!-- Reminders button -->
        <a href="/Swara/student/reminders.html" 
           class="bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold shadow-lg hover:bg-blue-600 transition-all">
            Reminders
        </a>

        <!-- Logout button -->
        <button id="logoutBtn" 
                class="bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold shadow-lg hover:bg-blue-600 transition-all">
            Logout
        </button>

        <!-- Chat with AI button -->
        <a href="/Swara/chatbot/chatbot.html"
           class="bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold shadow-lg hover:bg-blue-600 transition-all">
            ðŸ¤– Chat with AI
        </a>
    </footer>

    <!-- Fixed JS path for GitHub Pages -->
    <script src="/Swara/js/student.js"></script>

    <!-- Logout functionality -->
    <script>
        document.getElementById('logoutBtn').addEventListener('click', () => {
            localStorage.removeItem('token');
            window.location.href = '/Swara/login.html';
        });

        // Update student.js fetch URL (optional if not already inside student.js)
        // Example fetch function to use Render backend
        async function fetchTasks() {
            const token = localStorage.getItem('token');
            if (!token) return;

            try {
                const res = await fetch("https://swara-backend-q76j.onrender.com/api/student/tasks", {
                    headers: {
                        "Content-Type": "application/json",
                        "Authorization": "Bearer " + token
                    }
                });
                const tasks = await res.json();
                const tasksList = document.getElementById('tasksList');
                tasksList.innerHTML = "";
                tasks.forEach(task => {
                    const li = document.createElement('li');
                    li.textContent = task.name; // or task.title depending on your backend
                    tasksList.appendChild(li);
                });
            } catch (err) {
                console.error("Failed to fetch tasks:", err);
            }
        }

        fetchTasks();
    </script>

</body>
</html>
